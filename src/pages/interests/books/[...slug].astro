---
import { getCollection } from "astro:content";
import DetailLayout from "../../../layouts/DetailLayout.astro";

export async function getStaticPaths() {
    const books = await getCollection("books");
    return books.map((entry) => ({
        params: { slug: entry.slug },
        props: { entry },
    }));
}

const { entry } = Astro.props;
const { Content } = await entry.render();
---

<DetailLayout
    title={entry.data.title}
    subtitle={entry.data.author}
    date={`Read: ${entry.data.dateRead} | Rating: ${entry.data.rating}/5`}
    color="orange"
    backLink="/interests"
    backText="Interests"
>
    <div class="flex flex-col md:flex-row gap-8 mb-12 not-prose">
        <div class="w-full md:w-1/3 max-w-[250px] mx-auto md:mx-0">
            <div
                class="aspect-[2/3] rounded-lg overflow-hidden border border-white/10 shadow-2xl"
            >
                <img
                    src={entry.data.cover}
                    alt={entry.data.title}
                    class="w-full h-full object-cover"
                />
            </div>
        </div>
        <div class="flex-1">
            <!-- Content will be rendered here via slot, but adding extra context if needed -->
        </div>
    </div>

    <Content />
</DetailLayout>
